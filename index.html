<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UtiliHub - Your All-in-One Utility Tools Hub</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .search-bar {
            max-width: 500px;
            margin: 0 auto 30px;
            position: relative;
        }

        .search-input {
            width: 100%;
            padding: 15px 50px 15px 20px;
            border: none;
            border-radius: 25px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .search-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .search-input:focus {
            background: rgba(255, 255, 255, 0.25);
            transform: scale(1.02);
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .tool-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .tool-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .tool-card.working {
            border-left: 4px solid #4CAF50;
        }

        .tool-card.planned {
            border-left: 4px solid #FF9800;
            opacity: 0.7;
        }

        .tool-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            display: block;
        }

        .tool-title {
            color: white;
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .tool-description {
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.95rem;
            line-height: 1.5;
        }

        .status-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-working {
            background: #4CAF50;
            color: white;
        }

        .status-planned {
            background: #FF9800;
            color: white;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .modal-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 20px 20px 0 0;
            position: relative;
        }

        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close {
            position: absolute;
            right: 20px;
            top: 20px;
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.3s;
        }

        .close:hover {
            opacity: 1;
        }

        .modal-body {
            padding: 30px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #333;
        }

        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: #667eea;
        }

        .form-textarea {
            resize: vertical;
            min-height: 120px;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background: #6c757d;
        }

        .drop-zone {
            border: 2px dashed #667eea;
            border-radius: 10px;
            padding: 40px 20px;
            text-align: center;
            background: rgba(102, 126, 234, 0.05);
            transition: all 0.3s ease;
        }

        .drop-zone.drag-over {
            border-color: #4CAF50;
            background: rgba(76, 175, 80, 0.1);
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: #e0e0e0;
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            width: 0%;
            transition: width 0.3s ease;
        }

        .result-area {
            margin-top: 20px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            display: none;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            font-size: 0.85rem;
            color: #666;
            margin-top: 5px;
        }

        .calculator-display {
            background: #2c3e50;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
        }

        .calculator-result {
            font-size: 2rem;
            text-align: right;
            min-height: 50px;
            display: flex;
            align-items: center;
            justify-content: flex-end;
        }

        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .calc-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
        }

        .calc-btn.operator {
            background: #e74c3c;
            color: white;
        }

        .calc-btn.number {
            background: #ecf0f1;
            color: #2c3e50;
        }

        .calc-btn.function {
            background: #3498db;
            color: white;
        }

        .calc-btn:hover {
            transform: scale(0.95);
            opacity: 0.9;
        }

        .history {
            max-height: 150px;
            overflow-y: auto;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 8px;
            margin-top: 15px;
        }

        .history-item {
            padding: 5px 0;
            border-bottom: 1px solid #eee;
            font-family: 'Courier New', monospace;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .calculator-buttons {
                grid-template-columns: repeat(3, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 UtiliHub</h1>
            <p>Your All-in-One Utility Tools Hub</p>
            <p style="font-size: 1rem; opacity: 0.8;">No downloads, no signups - just instant results</p>
        </div>

        <div class="search-bar">
            <input type="text" class="search-input" placeholder="Search tools..." id="searchInput">
        </div>

        <div class="tools-grid" id="toolsGrid">
            <!-- PDF Converter -->
            <div class="tool-card working" data-tool="pdf-converter">
                <span class="status-badge status-working">WORKING</span>
                <div class="tool-icon">📄</div>
                <div class="tool-title">PDF Converter</div>
                <div class="tool-description">Convert text, CSV, and images to professional PDF documents with real file processing</div>
            </div>

            <!-- PDF to Text -->
            <div class="tool-card working" data-tool="pdf-to-text">
                <span class="status-badge status-working">WORKING</span>
                <div class="tool-icon">📄→📝</div>
                <div class="tool-title">PDF to Text Converter</div>
                <div class="tool-description">Extract text from PDF documents with page-by-page processing and statistics</div>
            </div>

            <!-- Image Converter -->
            <div class="tool-card working" data-tool="image-converter">
                <span class="status-badge status-working">WORKING</span>
                <div class="tool-icon">🖼️</div>
                <div class="tool-title">Image Converter</div>
                <div class="tool-description">Convert between PNG, JPEG, and WebP formats with quality control</div>
            </div>

            <!-- Scientific Calculator -->
            <div class="tool-card working" data-tool="calculator">
                <span class="status-badge status-working">WORKING</span>
                <div class="tool-icon">🧮</div>
                <div class="tool-title">Advanced Scientific Calculator</div>
                <div class="tool-description">Full scientific functions with calculation history and multiple modes</div>
            </div>

            <!-- Text Tools -->
            <div class="tool-card working" data-tool="text-tools">
                <span class="status-badge status-working">WORKING</span>
                <div class="tool-icon">📝</div>
                <div class="tool-title">Text Tools</div>
                <div class="tool-description">Word counter, case converter, Lorem ipsum generator with real-time statistics</div>
            </div>

            <!-- Planned Tools -->
            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">🔗</div>
                <div class="tool-title">URL Shortener</div>
                <div class="tool-description">Create short, memorable links for your long URLs</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">📱</div>
                <div class="tool-title">QR Code Generator</div>
                <div class="tool-description">Generate QR codes for text, URLs, and contact information</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">🎨</div>
                <div class="tool-title">Color Tools</div>
                <div class="tool-description">Color picker, palette generator, and format converter</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">🔒</div>
                <div class="tool-title">Password Generator</div>
                <div class="tool-description">Create secure passwords with customizable options</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">🔤</div>
                <div class="tool-title">Base64 En/Decoder</div>
                <div class="tool-description">Encode and decode Base64 strings and files</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">🔐</div>
                <div class="tool-title">Hash Generator</div>
                <div class="tool-description">Generate MD5, SHA-1, SHA-256 hashes for text and files</div>
            </div>

            <div class="tool-card planned">
                <span class="status-badge status-planned">PLANNED</span>
                <div class="tool-icon">📋</div>
                <div class="tool-title">JSON Formatter</div>
                <div class="tool-description">Format, validate, and minify JSON data</div>
            </div>
        </div>
    </div>

    <!-- Modals for each tool -->
    
    <!-- PDF Converter Modal -->
    <div id="pdf-converter-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">📄 PDF Converter</span>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Input Type:</label>
                    <select class="form-select" id="pdfInputType">
                        <option value="text">Text Input</option>
                        <option value="csv">CSV File</option>
                        <option value="image">Image File</option>
                    </select>
                </div>

                <div class="form-group" id="textInputGroup">
                    <label class="form-label">Text Content:</label>
                    <textarea class="form-textarea" id="pdfTextInput" placeholder="Enter your text here..."></textarea>
                </div>

                <div class="form-group" id="fileInputGroup" style="display: none;">
                    <label class="form-label">Upload File:</label>
                    <div class="drop-zone" id="pdfDropZone">
                        <p>Drag & drop your file here or click to select</p>
                        <input type="file" id="pdfFileInput" style="display: none;" accept=".csv,.txt,.png,.jpg,.jpeg,.gif">
                    </div>
                </div>

                <div class="progress-bar" id="pdfProgressBar" style="display: none;">
                    <div class="progress-fill" id="pdfProgressFill"></div>
                </div>

                <div class="form-group">
                    <button class="btn" id="generatePdfBtn">Generate PDF</button>
                    <button class="btn btn-secondary" id="downloadPdfBtn" style="display: none;">Download PDF</button>
                </div>

                <div class="result-area" id="pdfResult"></div>
            </div>
        </div>
    </div>

    <!-- PDF to Text Modal -->
    <div id="pdf-to-text-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">📄→📝 PDF to Text Converter</span>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Upload PDF File (Max 10MB):</label>
                    <div class="drop-zone" id="pdfTextDropZone">
                        <p>Drag & drop your PDF here or click to select</p>
                        <input type="file" id="pdfTextFileInput" style="display: none;" accept=".pdf">
                    </div>
                </div>

                <div class="progress-bar" id="pdfTextProgressBar" style="display: none;">
                    <div class="progress-fill" id="pdfTextProgressFill"></div>
                </div>

                <div class="stats" id="pdfTextStats" style="display: none;">
                    <div class="stat-item">
                        <div class="stat-number" id="pageCount">0</div>
                        <div class="stat-label">Pages</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="wordCount">0</div>
                        <div class="stat-label">Words</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="charCount">0</div>
                        <div class="stat-label">Characters</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="lineCount">0</div>
                        <div class="stat-label">Lines</div>
                    </div>
                </div>

                <div class="result-area" id="pdfTextResult">
                    <textarea class="form-textarea" id="extractedText" placeholder="Extracted text will appear here..." readonly></textarea>
                    <div style="margin-top: 15px;">
                        <button class="btn" id="copyTextBtn">Copy to Clipboard</button>
                        <button class="btn btn-secondary" id="downloadTextBtn">Download as TXT</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Converter Modal -->
    <div id="image-converter-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">🖼️ Image Converter</span>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Upload Image:</label>
                    <div class="drop-zone" id="imageDropZone">
                        <p>Drag & drop your image here or click to select</p>
                        <input type="file" id="imageFileInput" style="display: none;" accept="image/*">
                    </div>
                </div>

                <div class="form-group">
                    <label class="form-label">Convert to:</label>
                    <select class="form-select" id="imageFormat">
                        <option value="jpeg">JPEG</option>
                        <option value="png">PNG</option>
                        <option value="webp">WebP</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Quality (for JPEG/WebP): <span id="qualityValue">90</span>%</label>
                    <input type="range" id="qualityRange" min="10" max="100" value="90" style="width: 100%;">
                </div>

                <div class="progress-bar" id="imageProgressBar" style="display: none;">
                    <div class="progress-fill" id="imageProgressFill"></div>
                </div>

                <div class="result-area" id="imageResult">
                    <canvas id="imageCanvas" style="max-width: 100%; display: none;"></canvas>
                    <div id="imageStats" style="margin-top: 15px; display: none;">
                        <p>Original size: <span id="originalSize"></span></p>
                        <p>New size: <span id="newSize"></span></p>
                        <p>Compression: <span id="compressionRatio"></span></p>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn" id="convertImageBtn">Convert Image</button>
                        <button class="btn btn-secondary" id="downloadImageBtn" style="display: none;">Download Converted Image</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Calculator Modal -->
    <div id="calculator-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">🧮 Advanced Scientific Calculator</span>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <button class="btn" id="basicModeBtn">Basic Mode</button>
                    <button class="btn btn-secondary" id="scientificModeBtn">Scientific Mode</button>
                </div>

                <div class="calculator-display">
                    <div class="calculator-result" id="calcDisplay">0</div>
                </div>

                <div class="calculator-buttons" id="calcButtons">
                    <!-- Basic buttons -->
                    <button class="calc-btn function" onclick="clearCalc()">C</button>
                    <button class="calc-btn function" onclick="deleteLast()">⌫</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('/')">/</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('*')">×</button>
                    
                    <button class="calc-btn number" onclick="appendToDisplay('7')">7</button>
                    <button class="calc-btn number" onclick="appendToDisplay('8')">8</button>
                    <button class="calc-btn number" onclick="appendToDisplay('9')">9</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('-')">-</button>
                    
                    <button class="calc-btn number" onclick="appendToDisplay('4')">4</button>
                    <button class="calc-btn number" onclick="appendToDisplay('5')">5</button>
                    <button class="calc-btn number" onclick="appendToDisplay('6')">6</button>
                    <button class="calc-btn operator" onclick="appendToDisplay('+')">+</button>
                    
                    <button class="calc-btn number" onclick="appendToDisplay('1')">1</button>
                    <button class="calc-btn number" onclick="appendToDisplay('2')">2</button>
                    <button class="calc-btn number" onclick="appendToDisplay('3')">3</button>
                    <button class="calc-btn operator" onclick="calculate()" rowspan="2">=</button>
                    
                    <button class="calc-btn number" onclick="appendToDisplay('0')" style="grid-column: span 2;">0</button>
                    <button class="calc-btn number" onclick="appendToDisplay('.')">.</button>
                </div>

                <div class="calculator-buttons" id="scientificButtons" style="display: none;">
                    <button class="calc-btn function" onclick="appendToDisplay('sin(')">sin</button>
                    <button class="calc-btn function" onclick="appendToDisplay('cos(')">cos</button>
                    <button class="calc-btn function" onclick="appendToDisplay('tan(')">tan</button>
                    <button class="calc-btn function" onclick="appendToDisplay('log(')">log</button>
                    
                    <button class="calc-btn function" onclick="appendToDisplay('sqrt(')">√</button>
                    <button class="calc-btn function" onclick="appendToDisplay('^')">x²</button>
                    <button class="calc-btn function" onclick="appendToDisplay('!')">x!</button>
                    <button class="calc-btn function" onclick="appendToDisplay('π')">π</button>
                </div>

                <div class="history" id="calcHistory">
                    <h4>Recent Calculations</h4>
                    <div id="historyList"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Text Tools Modal -->
    <div id="text-tools-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="modal-title">📝 Text Tools</span>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <button class="btn" id="wordCounterBtn">Word Counter</button>
                    <button class="btn btn-secondary" id="caseConverterBtn">Case Converter</button>
                    <button class="btn btn-secondary" id="loremGeneratorBtn">Lorem Generator</button>
                </div>

                <!-- Word Counter -->
                <div id="wordCounterTool">
                    <div class="form-group">
                        <label class="form-label">Enter your text:</label>
                        <textarea class="form-textarea" id="textInput" placeholder="Type or paste your text here..."></textarea>
                    </div>

                    <div class="stats" id="textStats">
                        <div class="stat-item">
                            <div class="stat-number" id="textWordCount">0</div>
                            <div class="stat-label">Words</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="textCharCount">0</div>
                            <div class="stat-label">Characters</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="textCharNoSpaceCount">0</div>
                            <div class="stat-label">Chars (no spaces)</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="textLineCount">0</div>
                            <div class="stat-label">Lines</div>
                        </div>
                    </div>
                </div>

                <!-- Case Converter -->
                <div id="caseConverterTool" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Enter text to convert:</label>
                        <textarea class="form-textarea" id="caseInput" placeholder="Type your text here..."></textarea>
                    </div>

                    <div class="form-group">
                        <button class="btn" onclick="convertCase('upper')">UPPER CASE</button>
                        <button class="btn" onclick="convertCase('lower')">lower case</button>
                        <button class="btn" onclick="convertCase('title')">Title Case</button>
                        <button class="btn" onclick="convertCase('sentence')">Sentence case</button>
                    </div>

                    <div class="result-area" id="caseResult">
                        <textarea class="form-textarea" id="caseOutput" placeholder="Converted text will appear here..." readonly></textarea>
                        <button class="btn" id="copyCaseBtn">Copy Result</button>
                    </div>
                </div>

                <!-- Lorem Generator -->
                <div id="loremGeneratorTool" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">Number of words:</label>
                        <input type="number" class="form-input" id="loremWordCount" value="50" min="1" max="1000">
                    </div>

                    <div class="form-group">
                        <button class="btn" id="generateLoremBtn">Generate Lorem Ipsum</button>
                    </div>

                    <div class="result-area" id="loremResult">
                        <textarea class="form-textarea" id="loremOutput" placeholder="Lorem ipsum text will appear here..." readonly></textarea>
                        <button class="btn" id="copyLoremBtn">Copy Lorem Text</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentTool = null;
        let calculatorHistory = [];
        let currentCalculation = '';
        let calculatorMode = 'basic';

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const toolCards = document.querySelectorAll('.tool-card');
            
            toolCards.forEach(card => {
                const title = card.querySelector('.tool-title').textContent.toLowerCase();
                const description = card.querySelector('.tool-description').textContent.toLowerCase();
                
                if (title.includes(searchTerm) || description.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Modal functionality
        document.querySelectorAll('.tool-card').forEach(card => {
            card.addEventListener('click', function() {
                const tool = this.dataset.tool;
                if (this.classList.contains('working')) {
                    openModal(tool);
                } else {
                    showMessage('This tool is coming soon!', 'info');
                }
            });
        });

        function openModal(toolName) {
            const modal = document.getElementById(toolName + '-modal');
            if (modal) {
                modal.style.display = 'block';
                currentTool = toolName;
                initializeTool(toolName);
            }
        }

        // Close modals
        document.querySelectorAll('.close').forEach(closeBtn => {
            closeBtn.addEventListener('click', function() {
                this.closest('.modal').style.display = 'none';
            });
        });

        window.addEventListener('click', function(e) {
            if (e.target.classList.contains('modal')) {
                e.target.style.display = 'none';
            }
        });

        // Initialize tools
        function initializeTool(toolName) {
            switch(toolName) {
                case 'pdf-converter':
                    initPdfConverter();
                    break;
                case 'pdf-to-text':
                    initPdfToText();
                    break;
                case 'image-converter':
                    initImageConverter();
                    break;
                case 'calculator':
                    initCalculator();
                    break;
                case 'text-tools':
                    initTextTools();
                    break;
            }
        }

        // PDF Converter Implementation
        function initPdfConverter() {
            const inputType = document.getElementById('pdfInputType');
            const textGroup = document.getElementById('textInputGroup');
            const fileGroup = document.getElementById('fileInputGroup');
            const dropZone = document.getElementById('pdfDropZone');
            const fileInput = document.getElementById('pdfFileInput');

            inputType.addEventListener('change', function() {
                if (this.value === 'text') {
                    textGroup.style.display = 'block';
                    fileGroup.style.display = 'none';
                } else {
                    textGroup.style.display = 'none';
                    fileGroup.style.display = 'block';
                    fileInput.accept = this.value === 'csv' ? '.csv,.txt' : 'image/*';
                }
            });

            setupDropZone(dropZone, fileInput);
            
            document.getElementById('generatePdfBtn').addEventListener('click', generatePDF);
        }

        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const inputType = document.getElementById('pdfInputType').value;
            
            showProgress('pdfProgressBar', 'pdfProgressFill');

            try {
                if (inputType === 'text') {
                    const text = document.getElementById('pdfTextInput').value;
                    if (!text.trim()) {
                        showMessage('Please enter some text', 'error');
                        return;
                    }
                    
                    const lines = doc.splitTextToSize(text, 180);
                    doc.text(lines, 20, 20);
                    
                } else if (inputType === 'csv') {
                    const fileInput = document.getElementById('pdfFileInput');
                    if (!fileInput.files[0]) {
                        showMessage('Please select a CSV file', 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const csvData = e.target.result;
                        const lines = csvData.split('\n');
                        
                        let yPos = 20;
                        lines.forEach((line, index) => {
                            if (yPos > 280) {
                                doc.addPage();
                                yPos = 20;
                            }
                            doc.text(line.substring(0, 100), 20, yPos);
                            yPos += 10;
                        });
                        
                        completePDFGeneration(doc);
                    };
                    reader.readAsText(fileInput.files[0]);
                    return;
                    
                } else if (inputType === 'image') {
                    const fileInput = document.getElementById('pdfFileInput');
                    if (!fileInput.files[0]) {
                        showMessage('Please select an image file', 'error');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const img = new Image();
                        img.onload = function() {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');
                            
                            const maxWidth = 180;
                            const maxHeight = 250;
                            let { width, height } = img;
                            
                            if (width > maxWidth) {
                                height = (height * maxWidth) / width;
                                width = maxWidth;
                            }
                            if (height > maxHeight) {
                                width = (width * maxHeight) / height;
                                height = maxHeight;
                            }
                            
                            canvas.width = width;
                            canvas.height = height;
                            ctx.drawImage(img, 0, 0, width, height);
                            
                            const imgData = canvas.toDataURL('image/jpeg', 0.95);
                            doc.addImage(imgData, 'JPEG', 20, 20, width, height);
                            
                            completePDFGeneration(doc);
                        };
                        img.src = e.target.result;
                    };
                    reader.readAsDataURL(fileInput.files[0]);
                    return;
                }
                
                completePDFGeneration(doc);
                
            } catch (error) {
                showMessage('Error generating PDF: ' + error.message, 'error');
                hideProgress('pdfProgressBar');
            }
        }

        function completePDFGeneration(doc) {
            setTimeout(() => {
                const pdfBlob = doc.output('blob');
                const url = URL.createObjectURL(pdfBlob);
                
                document.getElementById('downloadPdfBtn').style.display = 'inline-block';
                document.getElementById('downloadPdfBtn').onclick = () => {
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'converted-document.pdf';
                    a.click();
                };
                
                document.getElementById('pdfResult').style.display = 'block';
                document.getElementById('pdfResult').innerHTML = '<p>✅ PDF generated successfully! Click download to save.</p>';
                
                hideProgress('pdfProgressBar');
                showMessage('PDF generated successfully!', 'success');
            }, 1000);
        }

        // PDF to Text Implementation
        function initPdfToText() {
            const dropZone = document.getElementById('pdfTextDropZone');
            const fileInput = document.getElementById('pdfTextFileInput');
            
            setupDropZone(dropZone, fileInput);
            
            fileInput.addEventListener('change', function() {
                if (this.files[0]) {
                    processPDFToText(this.files[0]);
                }
            });
        }

        async function processPDFToText(file) {
            if (file.size > 10 * 1024 * 1024) {
                showMessage('File too large. Maximum size is 10MB.', 'error');
                return;
            }

            showProgress('pdfTextProgressBar', 'pdfTextProgressFill');
            
            try {
                const arrayBuffer = await file.arrayBuffer();
                const pdf = await pdfjsLib.getDocument(arrayBuffer).promise;
                
                let fullText = '';
                const totalPages = pdf.numPages;
                
                document.getElementById('pageCount').textContent = totalPages;
                
                for (let i = 1; i <= totalPages; i++) {
                    const page = await pdf.getPage(i);
                    const textContent = await page.getTextContent();
                    
                    const pageText = textContent.items.map(item => item.str).join(' ');
                    fullText += pageText + '\n\n';
                    
                    updateProgress('pdfTextProgressFill', (i / totalPages) * 100);
                }
                
                const words = fullText.trim().split(/\s+/).length;
                const characters = fullText.length;
                const lines = fullText.split('\n').length;
                
                document.getElementById('wordCount').textContent = words;
                document.getElementById('charCount').textContent = characters;
                document.getElementById('lineCount').textContent = lines;
                
                document.getElementById('extractedText').value = fullText.trim();
                document.getElementById('pdfTextStats').style.display = 'grid';
                document.getElementById('pdfTextResult').style.display = 'block';
                
                hideProgress('pdfTextProgressBar');
                showMessage('Text extracted successfully!', 'success');
                
                // Setup copy and download buttons
                document.getElementById('copyTextBtn').onclick = () => copyToClipboard(fullText.trim());
                document.getElementById('downloadTextBtn').onclick = () => downloadText(fullText.trim(), 'extracted-text.txt');
                
            } catch (error) {
                hideProgress('pdfTextProgressBar');
                if (error.message.includes('Invalid PDF')) {
                    showMessage('This appears to be a scanned PDF. OCR Pro upgrade coming soon for scanned documents!', 'info');
                } else {
                    showMessage('Error processing PDF: ' + error.message, 'error');
                }
            }
        }

        // Image Converter Implementation
        function initImageConverter() {
            const dropZone = document.getElementById('imageDropZone');
            const fileInput = document.getElementById('imageFileInput');
            const qualityRange = document.getElementById('qualityRange');
            const qualityValue = document.getElementById('qualityValue');
            
            setupDropZone(dropZone, fileInput);
            
            qualityRange.addEventListener('input', function() {
                qualityValue.textContent = this.value;
            });
            
            fileInput.addEventListener('change', function() {
                if (this.files[0]) {
                    loadImageForConversion(this.files[0]);
                }
            });
            
            document.getElementById('convertImageBtn').addEventListener('click', convertImage);
        }

        let originalImageFile = null;
        let originalImageSize = 0;

        function loadImageForConversion(file) {
            originalImageFile = file;
            originalImageSize = file.size;
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.getElementById('imageCanvas');
                    const ctx = canvas.getContext('2d');
                    
                    canvas.width = img.width;
                    canvas.height = img.height;
                    ctx.drawImage(img, 0, 0);
                    
                    canvas.style.display = 'block';
                    document.getElementById('imageResult').style.display = 'block';
                    document.getElementById('originalSize').textContent = formatFileSize(originalImageSize);
                };
                img.src = e.target.result;
            };
            reader.readAsDataURL(file);
        }

        function convertImage() {
            if (!originalImageFile) {
                showMessage('Please select an image first', 'error');
                return;
            }

            showProgress('imageProgressBar', 'imageProgressFill');
            
            const canvas = document.getElementById('imageCanvas');
            const format = document.getElementById('imageFormat').value;
            const quality = document.getElementById('qualityRange').value / 100;
            
            setTimeout(() => {
                let mimeType, extension;
                switch(format) {
                    case 'jpeg':
                        mimeType = 'image/jpeg';
                        extension = 'jpg';
                        break;
                    case 'png':
                        mimeType = 'image/png';
                        extension = 'png';
                        break;
                    case 'webp':
                        mimeType = 'image/webp';
                        extension = 'webp';
                        break;
                }
                
                canvas.toBlob(function(blob) {
                    const newSize = blob.size;
                    const compressionRatio = ((originalImageSize - newSize) / originalImageSize * 100).toFixed(1);
                    
                    document.getElementById('newSize').textContent = formatFileSize(newSize);
                    document.getElementById('compressionRatio').textContent = compressionRatio + '%';
                    document.getElementById('imageStats').style.display = 'block';
                    
                    const url = URL.createObjectURL(blob);
                    document.getElementById('downloadImageBtn').style.display = 'inline-block';
                    document.getElementById('downloadImageBtn').onclick = () => {
                        const a = document.createElement('a');
                        a.href = url;
                        a.download = `converted-image.${extension}`;
                        a.click();
                    };
                    
                    hideProgress('imageProgressBar');
                    showMessage('Image converted successfully!', 'success');
                }, mimeType, quality);
            }, 500);
        }

        // Calculator Implementation
        function initCalculator() {
            document.getElementById('basicModeBtn').addEventListener('click', () => switchCalculatorMode('basic'));
            document.getElementById('scientificModeBtn').addEventListener('click', () => switchCalculatorMode('scientific'));
            
            clearCalc();
            updateCalculatorHistory();
        }

        function switchCalculatorMode(mode) {
            calculatorMode = mode;
            const basicBtn = document.getElementById('basicModeBtn');
            const scientificBtn = document.getElementById('scientificModeBtn');
            const scientificButtons = document.getElementById('scientificButtons');
            
            if (mode === 'basic') {
                basicBtn.className = 'btn';
                scientificBtn.className = 'btn btn-secondary';
                scientificButtons.style.display = 'none';
            } else {
                basicBtn.className = 'btn btn-secondary';
                scientificBtn.className = 'btn';
                scientificButtons.style.display = 'grid';
            }
        }

        function appendToDisplay(value) {
            const display = document.getElementById('calcDisplay');
            if (display.textContent === '0') {
                display.textContent = value;
            } else {
                display.textContent += value;
            }
            currentCalculation = display.textContent;
        }

        function clearCalc() {
            document.getElementById('calcDisplay').textContent = '0';
            currentCalculation = '';
        }

        function deleteLast() {
            const display = document.getElementById('calcDisplay');
            if (display.textContent.length > 1) {
                display.textContent = display.textContent.slice(0, -1);
            } else {
                display.textContent = '0';
            }
            currentCalculation = display.textContent;
        }

        function calculate() {
            const display = document.getElementById('calcDisplay');
            let expression = currentCalculation;
            
            try {
                // Replace display symbols with calculation symbols
                expression = expression.replace(/×/g, '*').replace(/π/g, Math.PI);
                
                // Handle scientific functions
                expression = expression.replace(/sin\(/g, 'Math.sin(');
                expression = expression.replace(/cos\(/g, 'Math.cos(');
                expression = expression.replace(/tan\(/g, 'Math.tan(');
                expression = expression.replace(/log\(/g, 'Math.log10(');
                expression = expression.replace(/sqrt\(/g, 'Math.sqrt(');
                expression = expression.replace(/\^/g, '**');
                
                // Handle factorial
                expression = expression.replace(/(\d+)!/g, (match, num) => factorial(parseInt(num)));
                
                const result = eval(expression);
                
                if (isNaN(result) || !isFinite(result)) {
                    throw new Error('Invalid calculation');
                }
                
                display.textContent = result;
                
                // Add to history
                calculatorHistory.unshift({
                    expression: currentCalculation,
                    result: result
                });
                
                if (calculatorHistory.length > 5) {
                    calculatorHistory = calculatorHistory.slice(0, 5);
                }
                
                updateCalculatorHistory();
                currentCalculation = result.toString();
                
            } catch (error) {
                display.textContent = 'Error';
                currentCalculation = '';
            }
        }

        function factorial(n) {
            if (n < 0) return NaN;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) {
                result *= i;
            }
            return result;
        }

        function updateCalculatorHistory() {
            const historyList = document.getElementById('historyList');
            historyList.innerHTML = '';
            
            calculatorHistory.forEach(calc => {
                const historyItem = document.createElement('div');
                historyItem.className = 'history-item';
                historyItem.innerHTML = `${calc.expression} = ${calc.result}`;
                historyList.appendChild(historyItem);
            });
        }

        // Text Tools Implementation
        function initTextTools() {
            document.getElementById('wordCounterBtn').addEventListener('click', () => switchTextTool('wordCounter'));
            document.getElementById('caseConverterBtn').addEventListener('click', () => switchTextTool('caseConverter'));
            document.getElementById('loremGeneratorBtn').addEventListener('click', () => switchTextTool('loremGenerator'));
            
            // Word counter real-time updates
            document.getElementById('textInput').addEventListener('input', updateTextStats);
            
            // Lorem generator
            document.getElementById('generateLoremBtn').addEventListener('click', generateLorem);
            document.getElementById('copyLoremBtn').addEventListener('click', () => {
                copyToClipboard(document.getElementById('loremOutput').value);
            });
            
            document.getElementById('copyCaseBtn').addEventListener('click', () => {
                copyToClipboard(document.getElementById('caseOutput').value);
            });
            
            switchTextTool('wordCounter');
        }

        function switchTextTool(tool) {
            // Hide all tools
            document.getElementById('wordCounterTool').style.display = 'none';
            document.getElementById('caseConverterTool').style.display = 'none';
            document.getElementById('loremGeneratorTool').style.display = 'none';
            
            // Reset button styles
            document.getElementById('wordCounterBtn').className = 'btn btn-secondary';
            document.getElementById('caseConverterBtn').className = 'btn btn-secondary';
            document.getElementById('loremGeneratorBtn').className = 'btn btn-secondary';
            
            // Show selected tool and highlight button
            if (tool === 'wordCounter') {
                document.getElementById('wordCounterTool').style.display = 'block';
                document.getElementById('wordCounterBtn').className = 'btn';
                updateTextStats();
            } else if (tool === 'caseConverter') {
                document.getElementById('caseConverterTool').style.display = 'block';
                document.getElementById('caseConverterBtn').className = 'btn';
            } else if (tool === 'loremGenerator') {
                document.getElementById('loremGeneratorTool').style.display = 'block';
                document.getElementById('loremGeneratorBtn').className = 'btn';
            }
        }

        function updateTextStats() {
            const text = document.getElementById('textInput').value;
            const words = text.trim() ? text.trim().split(/\s+/).length : 0;
            const characters = text.length;
            const charactersNoSpace = text.replace(/\s/g, '').length;
            const lines = text ? text.split('\n').length : 0;
            
            document.getElementById('textWordCount').textContent = words;
            document.getElementById('textCharCount').textContent = characters;
            document.getElementById('textCharNoSpaceCount').textContent = charactersNoSpace;
            document.getElementById('textLineCount').textContent = lines;
        }

        function convertCase(type) {
            const input = document.getElementById('caseInput').value;
            const output = document.getElementById('caseOutput');
            
            if (!input.trim()) {
                showMessage('Please enter some text to convert', 'error');
                return;
            }
            
            let result = '';
            
            switch(type) {
                case 'upper':
                    result = input.toUpperCase();
                    break;
                case 'lower':
                    result = input.toLowerCase();
                    break;
                case 'title':
                    result = input.replace(/\w\S*/g, txt => 
                        txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase()
                    );
                    break;
                case 'sentence':
                    result = input.toLowerCase().replace(/(^\w|\.\s*\w)/g, txt => 
                        txt.toUpperCase()
                    );
                    break;
            }
            
            output.value = result;
            document.getElementById('caseResult').style.display = 'block';
        }

        function generateLorem() {
            const wordCount = parseInt(document.getElementById('loremWordCount').value);
            
            if (wordCount < 1 || wordCount > 1000) {
                showMessage('Please enter a word count between 1 and 1000', 'error');
                return;
            }
            
            const loremWords = [
                'lorem', 'ipsum', 'dolor', 'sit', 'amet', 'consectetur', 'adipiscing', 'elit',
                'sed', 'do', 'eiusmod', 'tempor', 'incididunt', 'ut', 'labore', 'et', 'dolore',
                'magna', 'aliqua', 'enim', 'ad', 'minim', 'veniam', 'quis', 'nostrud',
                'exercitation', 'ullamco', 'laboris', 'nisi', 'aliquip', 'ex', 'ea', 'commodo',
                'consequat', 'duis', 'aute', 'irure', 'in', 'reprehenderit', 'voluptate',
                'velit', 'esse', 'cillum', 'fugiat', 'nulla', 'pariatur', 'excepteur', 'sint',
                'occaecat', 'cupidatat', 'non', 'proident', 'sunt', 'culpa', 'qui', 'officia',
                'deserunt', 'mollit', 'anim', 'id', 'est', 'laborum'
            ];
            
            let result = [];
            for (let i = 0; i < wordCount; i++) {
                result.push(loremWords[Math.floor(Math.random() * loremWords.length)]);
            }
            
            // Capitalize first word and add periods
            let lorem = result.join(' ');
            lorem = lorem.charAt(0).toUpperCase() + lorem.slice(1);
            lorem = lorem.replace(/(\. |^)(\w)/g, (match, p1, p2) => p1 + p2.toUpperCase());
            
            // Add periods at reasonable intervals
            lorem = lorem.replace(/(\w+\s+\w+\s+\w+\s+\w+\s+\w+\s+\w+\s+\w+\s+\w+)(\s+)/g, '$1. ');
            lorem += '.';
            
            document.getElementById('loremOutput').value = lorem;
            document.getElementById('loremResult').style.display = 'block';
        }

        // Utility Functions
        function setupDropZone(dropZone, fileInput) {
            dropZone.addEventListener('click', () => fileInput.click());
            
            dropZone.addEventListener('dragover', function(e) {
                e.preventDefault();
                this.classList.add('drag-over');
            });
            
            dropZone.addEventListener('dragleave', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
            });
            
            dropZone.addEventListener('drop', function(e) {
                e.preventDefault();
                this.classList.remove('drag-over');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    fileInput.files = files;
                    fileInput.dispatchEvent(new Event('change'));
                }
            });
        }

        function showProgress(progressBarId, progressFillId) {
            document.getElementById(progressBarId).style.display = 'block';
            updateProgress(progressFillId, 0);
        }

        function updateProgress(progressFillId, percentage) {
            document.getElementById(progressFillId).style.width = percentage + '%';
        }

        function hideProgress(progressBarId) {
            document.getElementById(progressBarId).style.display = 'none';
        }

        function showMessage(message, type) {
            // Create a simple toast notification
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 20px;
                border-radius: 10px;
                color: white;
                font-weight: 600;
                z-index: 10000;
                transition: all 0.3s ease;
                max-width: 300px;
            `;
            
            switch(type) {
                case 'success':
                    toast.style.background = '#4CAF50';
                    break;
                case 'error':
                    toast.style.background = '#f44336';
                    break;
                case 'info':
                    toast.style.background = '#2196F3';
                    break;
                default:
                    toast.style.background = '#333';
            }
            
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translateY(-20px)';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text).then(() => {
                showMessage('Copied to clipboard!', 'success');
            }).catch(() => {
                showMessage('Failed to copy to clipboard', 'error');
            });
        }

        function downloadText(text, filename) {
            const blob = new Blob([text], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            a.click();
            URL.revokeObjectURL(url);
        }

        function formatFileSize(bytes) {
            if (bytes === 0) return '0 Bytes';
            const k = 1024;
            const sizes = ['Bytes', 'KB', 'MB', 'GB'];
            const i = Math.floor(Math.log(bytes) / Math.log(k));
            return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('UtiliHub loaded successfully! 🚀');
            showMessage('Welcome to UtiliHub! Click any working tool to get started.', 'info');
        });
    </script>
</body>
</html>